<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø© | Ummah Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; scroll-behavior: smooth; }
        .hero-gradient { 
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?auto=format&fit=crop&q=80'); 
            background-size: cover; 
            background-position: center; 
        }
        .loading-spinner { border-top-color: #ef4444; animation: spinner 0.6s linear infinite; }
        @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .logo-container { width: 65px; height: 65px; display: flex; align-items: center; justify-content: center; overflow: hidden; border-radius: 9999px; background: white; }
        .logo-img { height: 100%; width: 100%; object-fit: cover; }
        
        .slot-available { background: #f0fdf4; color: #166534; border: 1px solid #bcf0da; cursor: pointer; transition: all 0.2s; }
        .slot-available:hover { background: #dcfce7; transform: translateY(-2px); }
        .slot-booked { background: #fef2f2; color: #991b1b; border: 1px solid #fecaca; cursor: not-allowed; opacity: 0.7; }
        .slot-selected { background: #4338ca !important; color: white !important; border-color: #4338ca !important; transform: scale(1.05); }
        
        .admin-modal, .payment-modal { background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
        .booking-section h3 { font-weight: 900; color: #1e1b4b; margin-bottom: 1.5rem; border-right: 4px solid #ef4444; padding-right: 10px; }
        
        .slots-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
        @media (min-width: 640px) { .slots-grid { grid-template-columns: repeat(3, 1fr); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #4338ca; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="w-16 h-16 border-4 border-slate-200 loading-spinner rounded-full mb-4"></div>
        <p class="font-bold text-indigo-900">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©...</p>
    </div>

    <!-- Navigation -->
    <nav class="sticky top-0 w-full z-50 bg-white/95 backdrop-blur-md shadow-md border-b border-slate-100">
        <div class="container mx-auto px-4 py-2 flex justify-between items-center">
            <div class="flex items-center">
                <div class="logo-container border shadow-sm">
                    <img src="https://lh3.googleusercontent.com/d/1FFfUtXRmf5VCQ7RsQQyoDrbuOIgeCoaD" alt="Logo" class="logo-img">
                </div>
                <div class="mr-3">
                    <span class="text-indigo-900 font-black text-xl block leading-none">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø©</span>
                    <span class="text-slate-500 font-bold text-[10px] uppercase">Ummah Academy</span>
                </div>
            </div>
            <div class="hidden md:flex space-x-6 space-x-reverse font-bold text-sm">
                <a href="#home" class="hover:text-red-600 transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#booking" class="hover:text-red-600 transition">Ø­Ø¬Ø² Ø§Ù„Ù…Ù„Ø¹Ø¨</a>
                <a href="#academy" class="hover:text-red-600 transition">ØªØ³Ø¬ÙŠÙ„ Ù„Ø§Ø¹Ø¨</a>
                <a href="#archive" class="hover:text-red-600 transition">Ø§Ù„Ø£Ø±Ø´ÙŠÙ</a>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="toggleAdminModal(true)" class="text-slate-400 hover:text-indigo-900 transition-colors">
                    <i class="fas fa-user-shield text-xl"></i>
                </button>
                <button onclick="document.getElementById('booking').scrollIntoView()" class="bg-indigo-900 text-white px-6 py-2 rounded-xl font-bold text-sm hover:bg-indigo-800 transition">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
            </div>
        </div>
    </nav>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="fixed inset-0 z-[100] admin-modal hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-[2rem] p-8 shadow-2xl relative">
            <button onclick="toggleAdminModal(false)" class="absolute left-6 top-6 text-slate-300 hover:text-red-500 transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-indigo-100 text-indigo-900 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-lock text-2xl"></i>
                </div>
                <h3 class="text-2xl font-black text-indigo-900">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            </div>
            <div class="space-y-4">
                <input type="text" id="adminUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full px-4 py-4 rounded-xl border bg-slate-50 outline-none focus:ring-2 ring-indigo-500">
                <input type="password" id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-4 rounded-xl border bg-slate-50 outline-none focus:ring-2 ring-indigo-500">
                <button id="adminLoginBtn" class="w-full bg-indigo-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-indigo-800 transition">Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="fixed inset-0 z-[200] bg-slate-100 hidden overflow-y-auto pb-20">
        <div class="container mx-auto px-4 py-8 max-w-6xl">
            <div class="flex justify-between items-center mb-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h2 class="text-2xl font-black text-indigo-900">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                <button onclick="logoutAdmin()" class="bg-red-500 text-white px-6 py-2 rounded-xl font-bold hover:bg-red-600 transition">Ø®Ø±ÙˆØ¬</button>
            </div>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="font-black mb-4 text-indigo-900 border-b pb-2 flex items-center">
                        <i class="fas fa-calendar-alt ml-2"></i> Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ù„Ø¹Ø¨
                    </h3>
                    <div id="adminBookingContent" class="space-y-3 max-h-[500px] overflow-y-auto pr-2"></div>
                </div>
                <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="font-black mb-4 text-green-700 border-b pb-2 flex items-center">
                        <i class="fas fa-users ml-2"></i> Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†
                    </h3>
                    <div id="adminPlayerContent" class="space-y-3 max-h-[500px] overflow-y-auto pr-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 z-[1000] payment-modal hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl relative text-center">
            <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-credit-card text-3xl"></i>
            </div>
            <h3 class="text-2xl font-black text-indigo-900 mb-2">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØµØ±ÙÙŠ</h3>
            <p class="text-slate-500 mb-6 text-sm">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ø£Ù…Ø§Ù†</p>
            <div class="space-y-4 text-right">
                <div>
                    <label class="text-xs font-bold text-slate-400 mr-2">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</label>
                    <input type="text" id="cardNumber" placeholder="**** **** **** ****" class="w-full p-4 rounded-xl border bg-slate-50 text-center tracking-widest font-mono">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs font-bold text-slate-400 mr-2">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label>
                        <input type="text" id="cardExpiry" placeholder="MM/YY" class="w-full p-4 rounded-xl border bg-slate-50 text-center">
                    </div>
                    <div>
                        <label class="text-xs font-bold text-slate-400 mr-2">Ø±Ù…Ø² Ø§Ù„Ù€ CVV</label>
                        <input type="password" id="cardCvv" placeholder="***" class="w-full p-4 rounded-xl border bg-slate-50 text-center">
                    </div>
                </div>
                <button id="payConfirmBtn" class="w-full bg-green-600 text-white py-5 rounded-2xl font-black text-xl shadow-lg mt-4 disabled:bg-slate-300 transition">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</button>
                <button onclick="togglePaymentModal(false)" class="w-full text-slate-400 font-bold py-2 hover:text-red-500 transition">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <!-- Hero -->
    <section id="home" class="hero-gradient min-h-[85vh] flex items-center justify-center text-center text-white px-4">
        <div class="max-w-3xl">
            <h1 class="text-5xl md:text-7xl font-black mb-6 italic">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø©</h1>
            <div class="h-1 w-24 bg-red-600 mx-auto mb-6"></div>
            <p class="text-xl md:text-2xl text-slate-200 mb-10 font-light">Ù†ØµÙ†Ø¹ Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØºØ¯ Ø¨Ù…Ø¯Ø±Ø¨ÙŠÙ† Ù…Ø­ØªØ±ÙÙŠÙ† ÙˆÙ…Ø±Ø§ÙÙ‚ Ø±ÙŠØ§Ø¶ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©.</p>
            <div class="flex flex-wrap justify-center gap-4">
                <a href="#booking" class="bg-red-600 hover:bg-red-700 px-10 py-4 rounded-2xl font-black transition-all transform hover:scale-105 shadow-xl">Ø­Ø¬Ø² Ø§Ù„Ù…Ù„Ø¹Ø¨</a>
                <a href="#academy" class="bg-white text-indigo-900 hover:bg-slate-100 px-10 py-4 rounded-2xl font-black transition-all transform hover:scale-105 shadow-xl">ØªØ³Ø¬ÙŠÙ„ Ù„Ø§Ø¹Ø¨</a>
            </div>
        </div>
    </section>

    <!-- Academy Registration -->
    <section id="academy" class="py-24 px-4 bg-indigo-50">
        <div class="container mx-auto max-w-4xl">
            <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-indigo-100 flex flex-col md:flex-row">
                <div class="md:w-2/5 bg-indigo-900 p-12 text-white flex flex-col justify-center">
                    <h2 class="text-3xl font-black mb-8 italic">Ø§Ù†Ø¶Ù… Ù„Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</h2>
                    <ul class="space-y-6 text-indigo-100">
                        <li class="flex items-center"><i class="fas fa-check-circle ml-3 text-green-400"></i> ØªØ¯Ø±ÙŠØ¨Ø§Øª ÙŠÙˆÙ…ÙŠØ© Ù…ÙƒØ«ÙØ©</li>
                        <li class="flex items-center"><i class="fas fa-check-circle ml-3 text-green-400"></i> Ø£Ø±Ø´ÙŠÙ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨</li>
                        <li class="flex items-center"><i class="fas fa-check-circle ml-3 text-green-400"></i> Ù…Ø¯Ø±Ø¨ÙˆÙ† Ù…Ø¹ØªÙ…Ø¯ÙˆÙ†</li>
                        <li class="flex items-center"><i class="fas fa-check-circle ml-3 text-green-400"></i> Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙˆØ¯ÙŠØ© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</li>
                    </ul>
                </div>
                <div class="md:w-3/5 p-12">
                    <h3 class="text-2xl font-black mb-8 text-indigo-900">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>
                    <div class="grid gap-5">
                        <div class="space-y-1">
                            <label class="text-sm font-bold text-slate-500 mr-1">Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨</label>
                            <input type="text" id="playerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full p-4 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-1">
                                <label class="text-sm font-bold text-slate-500 mr-1">Ø§Ù„Ø¹Ù…Ø±</label>
                                <input type="number" id="playerAge" placeholder="Ù…Ø«Ø§Ù„: 12" class="w-full p-4 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                            </div>
                            <div class="space-y-1">
                                <label class="text-sm font-bold text-slate-500 mr-1">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</label>
                                <select id="playerLevel" class="w-full p-4 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                                    <option value="beginner">Ù…Ø¨ØªØ¯Ø¦</option>
                                    <option value="intermediate">Ù…ØªÙˆØ³Ø·</option>
                                    <option value="advanced">Ù…ØªÙ‚Ø¯Ù…</option>
                                </select>
                            </div>
                        </div>
                        <div class="space-y-1">
                            <label class="text-sm font-bold text-slate-500 mr-1">Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</label>
                            <input type="tel" id="playerParentPhone" placeholder="05xxxxxxxx" class="w-full p-4 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                        </div>
                        <button id="registerPlayerBtn" class="bg-indigo-900 text-white py-5 rounded-2xl font-black mt-4 shadow-lg hover:bg-indigo-800 transition transform hover:-translate-y-1">Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section id="booking" class="py-24 px-4 bg-white">
        <div class="container mx-auto max-w-5xl">
            <div class="bg-white rounded-[3rem] shadow-2xl p-8 md:p-16 border border-slate-100">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-black text-indigo-900 mb-4 italic">Ø§Ø­Ø¬Ø² Ù…Ù„Ø¹Ø¨Ùƒ</h2>
                    <p class="text-slate-500">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„ÙØ±ÙŠÙ‚Ùƒ ÙˆØ³Ø¯Ø¯ Ø§Ù„Ø­Ø¬Ø² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Ù‹</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-16 text-right">
                    <div class="space-y-6">
                        <div class="space-y-2">
                            <label class="block font-black text-slate-700">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²:</label>
                            <input type="date" id="targetDate" class="w-full p-5 rounded-2xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none font-bold text-indigo-900">
                        </div>
                        <div class="space-y-2">
                            <label class="block font-black text-slate-700">Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø¬Ø²:</label>
                            <input type="text" id="resName" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯" class="w-full p-5 rounded-2xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                        </div>
                        <div class="space-y-2">
                            <label class="block font-black text-slate-700">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
                            <input type="tel" id="resPhone" placeholder="05xxxxxxxx" class="w-full p-5 rounded-2xl border border-slate-200 bg-slate-50 focus:ring-2 ring-indigo-500 outline-none">
                        </div>
                    </div>
                    
                    <div class="booking-section">
                        <h3>Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</h3>
                        <div id="time-slots-container" class="slots-grid">
                            <div class="col-span-full text-center py-12 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200">
                                <i class="fas fa-calendar-day text-4xl text-slate-300 mb-3 block"></i>
                                <p class="text-slate-400 italic">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„Ø§Ù‹</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="submitBookingBtn" class="w-full mt-12 bg-red-600 text-white py-6 rounded-3xl font-black text-2xl shadow-2xl hover:bg-red-700 transition transform hover:scale-[1.02] active:scale-95">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„Ø¯ÙØ¹</button>
            </div>
        </div>
    </section>

    <!-- Archive Section -->
    <section id="archive" class="py-24 px-4 bg-slate-950 text-white">
        <div class="container mx-auto max-w-6xl">
            <div class="flex items-center mb-16">
                <div class="h-10 w-2 bg-red-600 ml-4"></div>
                <h2 class="text-4xl font-black italic">Ø£Ø±Ø´ÙŠÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h2>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8" id="archiveGrid">
                <!-- Video Item 1 -->
                <div class="aspect-video bg-slate-900 rounded-3xl overflow-hidden relative group cursor-pointer border border-slate-800">
                    <img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?auto=format&fit=crop&q=80" class="w-full h-full object-cover opacity-40 group-hover:scale-110 transition duration-700">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center backdrop-blur-sm group-hover:bg-red-600 transition-colors">
                            <i class="fas fa-play text-2xl text-white"></i>
                        </div>
                    </div>
                    <div class="absolute bottom-6 right-6 font-bold text-sm bg-black/80 px-4 py-2 rounded-xl border border-white/10">Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù„Ø´Ø¨Ø§Ø¨ - 01/01/2026</div>
                </div>
                <!-- Video Item 2 -->
                <div class="aspect-video bg-slate-900 rounded-3xl overflow-hidden relative group cursor-pointer border border-slate-800">
                    <img src="https://images.unsplash.com/photo-1517466787929-bc90951d0974?auto=format&fit=crop&q=80" class="w-full h-full object-cover opacity-40 group-hover:scale-110 transition duration-700">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center backdrop-blur-sm group-hover:bg-red-600 transition-colors">
                            <i class="fas fa-play text-2xl text-white"></i>
                        </div>
                    </div>
                    <div class="absolute bottom-6 right-6 font-bold text-sm bg-black/80 px-4 py-2 rounded-xl border border-white/10">ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø³ - 02/01/2026</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-indigo-950 text-indigo-200 py-12 px-4 border-t border-indigo-900">
        <div class="container mx-auto text-center">
            <div class="flex items-center justify-center mb-6">
                 <span class="text-white font-black text-2xl">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø©</span>
            </div>
            <p class="mb-6 opacity-60">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026 | ØªØ·ÙˆÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</p>
            <div class="flex justify-center gap-6 text-2xl">
                <a href="#" class="hover:text-white transition"><i class="fab fa-instagram"></i></a>
                <a href="#" class="hover:text-white transition"><i class="fab fa-snapchat"></i></a>
                <a href="#" class="hover:text-white transition"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-8 left-8 bg-indigo-900 text-white px-8 py-5 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.3)] transform translate-y-32 opacity-0 transition-all duration-500 z-[2000] border border-indigo-400/20">
        <div class="flex items-center gap-4">
            <div class="w-8 h-8 bg-white/10 rounded-full flex items-center justify-center">
                <i class="fas fa-info-circle text-indigo-300"></i>
            </div>
            <p id="toastMsg" class="font-black"></p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, serverTimestamp, query, where, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Configuration (Environment Provided)
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'ummah-academy-2026-final';
        
        let db, auth, currentUser, currentUnsubscribe = null;
        let selectedTime = null;
        let pendingAction = null;

        const showToast = (msg) => {
            const t = document.getElementById('toast');
            document.getElementById('toastMsg').innerText = msg;
            t.classList.remove('translate-y-32', 'opacity-0');
            setTimeout(() => t.classList.add('translate-y-32', 'opacity-0'), 4000);
        };

        const hideLoading = () => {
            const overlay = document.getElementById('loadingOverlay');
            if(overlay) {
                overlay.style.opacity = '0';
                setTimeout(() => overlay.style.display = 'none', 500);
            }
        };

        // Firebase Initialization
        const initFirebase = async () => {
            try {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                onAuthStateChanged(auth, (user) => {
                    currentUser = user;
                    if(user) {
                        hideLoading();
                        const dateVal = document.getElementById('targetDate').value;
                        if(dateVal) checkAvailability();
                    }
                });

                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token).catch(() => signInAnonymously(auth));
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Connection Error:", error);
                hideLoading();
                showToast("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø©");
            }
        };

        initFirebase();

        // Path Helpers (RULE 1)
        const getBookingCol = () => collection(db, 'artifacts', appId, 'public', 'data', 'bookings');
        const getPlayerCol = () => collection(db, 'artifacts', appId, 'public', 'data', 'players');

        // Global Window Functions for Modals
        window.toggleAdminModal = (show) => document.getElementById('adminModal').style.display = show ? 'flex' : 'none';
        window.togglePaymentModal = (show) => document.getElementById('paymentModal').style.display = show ? 'flex' : 'none';

        // Check Availability Logic
        const checkAvailability = () => {
            if(!db || !currentUser) return;

            const dateInput = document.getElementById('targetDate').value;
            const container = document.getElementById('time-slots-container');
            
            if(!dateInput) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200">
                        <i class="fas fa-calendar-day text-4xl text-slate-300 mb-3 block"></i>
                        <p class="text-slate-400 italic">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„Ø§Ù‹</p>
                    </div>`;
                return;
            }

            container.innerHTML = '<p class="col-span-full text-center py-10 text-indigo-500 animate-pulse font-black">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯...</p>';

            const hours = ["19:00", "20:00", "21:00", "22:00", "23:00", "00:00", "01:00"];
            
            if(currentUnsubscribe) currentUnsubscribe();

            // Real-time listener (RULE 2)
            const q = query(getBookingCol(), where("date", "==", dateInput));
            
            currentUnsubscribe = onSnapshot(q, (snapshot) => {
                const bookedTimes = [];
                snapshot.forEach(doc => bookedTimes.push(doc.data().time));
                
                container.innerHTML = '';
                hours.forEach(time => {
                    const isBooked = bookedTimes.includes(time);
                    const btn = document.createElement('div');
                    btn.className = `p-4 rounded-2xl text-center font-bold transition-all shadow-sm ${isBooked ? 'slot-booked' : 'slot-available'}`;
                    btn.innerHTML = isBooked ? `<i class="fas fa-lock text-xs ml-1"></i> ${time}` : time;

                    if(!isBooked) {
                        if(selectedTime === time) btn.classList.add('slot-selected');
                        btn.onclick = () => {
                            document.querySelectorAll('.slot-available').forEach(el => el.classList.remove('slot-selected'));
                            btn.classList.add('slot-selected');
                            selectedTime = time;
                        };
                    }
                    container.appendChild(btn);
                });

                if(hours.every(h => bookedTimes.includes(h))) {
                    container.innerHTML += '<p class="col-span-full text-red-500 text-center text-sm font-bold mt-4">Ù†Ø¹ØªØ°Ø±ØŒ Ø§Ù„ÙŠÙˆÙ… Ù…Ø­Ø¬ÙˆØ² Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</p>';
                }
            }, (err) => {
                console.error(err);
                container.innerHTML = '<p class="col-span-full text-red-400 text-center py-10">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>';
            });
        };

        document.getElementById('targetDate').addEventListener('change', () => {
            selectedTime = null;
            checkAvailability();
        });

        // Event Listeners for Forms
        document.getElementById('submitBookingBtn').addEventListener('click', () => {
            const name = document.getElementById('resName').value;
            const date = document.getElementById('targetDate').value;
            if(!name || !date || !selectedTime) return showToast("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªØ± Ù…ÙˆØ¹Ø¯Ø§Ù‹");
            pendingAction = 'booking';
            togglePaymentModal(true);
        });

        document.getElementById('registerPlayerBtn').addEventListener('click', () => {
            const name = document.getElementById('playerName').value;
            const age = document.getElementById('playerAge').value;
            if(!name || !age) return showToast("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø£ÙˆÙ„Ø§Ù‹");
            pendingAction = 'player';
            togglePaymentModal(true);
        });

        // Payment Execution
        document.getElementById('payConfirmBtn').addEventListener('click', async function() {
            if(!currentUser) return showToast("Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©");
            
            this.disabled = true;
            this.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";

            try {
                if(pendingAction === 'booking') {
                    await addDoc(getBookingCol(), {
                        name: document.getElementById('resName').value,
                        phone: document.getElementById('resPhone').value,
                        date: document.getElementById('targetDate').value,
                        time: selectedTime,
                        createdAt: serverTimestamp(),
                        uid: currentUser.uid
                    });
                    showToast("ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!");
                    document.getElementById('resName').value = '';
                    selectedTime = null;
                } else {
                    await addDoc(getPlayerCol(), {
                        name: document.getElementById('playerName').value,
                        age: document.getElementById('playerAge').value,
                        level: document.getElementById('playerLevel').value,
                        phone: document.getElementById('playerParentPhone').value,
                        createdAt: serverTimestamp(),
                        uid: currentUser.uid
                    });
                    showToast("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©!");
                    document.getElementById('playerName').value = '';
                }
                togglePaymentModal(false);
            } catch (e) {
                console.error(e);
                showToast("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©");
            } finally {
                this.disabled = false;
                this.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹";
            }
        });

        // Admin Auth & Functions
        document.getElementById('adminLoginBtn').addEventListener('click', () => {
            const u = document.getElementById('adminUser').value;
            const p = document.getElementById('adminPass').value;
            if(u === 'admin' && p === 'ummah2026') {
                document.getElementById('adminDashboard').classList.remove('hidden');
                toggleAdminModal(false);
                loadAdminData();
            } else {
                showToast("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        });

        window.logoutAdmin = () => document.getElementById('adminDashboard').classList.add('hidden');

        const loadAdminData = async () => {
            const bCont = document.getElementById('adminBookingContent');
            const pCont = document.getElementById('adminPlayerContent');
            
            bCont.innerHTML = '<p class="text-center py-6 animate-pulse">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>';
            pCont.innerHTML = '<p class="text-center py-6 animate-pulse">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>';

            try {
                // Fetch All (RULE 2: Filter in JS)
                const [bSnap, pSnap] = await Promise.all([getDocs(getBookingCol()), getDocs(getPlayerCol())]);
                
                bCont.innerHTML = bSnap.empty ? '<p class="text-slate-400 text-center py-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø³ØªÙ„Ù…Ø©</p>' : '';
                bSnap.forEach(d => {
                    const data = d.data();
                    bCont.innerHTML += `
                        <div class="p-5 bg-slate-50 border border-slate-200 rounded-2xl flex justify-between items-center group">
                            <div class="text-sm">
                                <div class="font-black text-indigo-900 mb-1">${data.date} <span class="text-red-600 ml-2">ğŸ•’ ${data.time}</span></div>
                                <div class="text-slate-500 font-bold">${data.name} | ğŸ“± ${data.phone || 'Ø¨Ø¯ÙˆÙ† Ù‡Ø§ØªÙ'}</div>
                            </div>
                            <button onclick="window.deleteDocItem('bookings', '${d.id}')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-red-50 text-red-500 hover:bg-red-500 hover:text-white transition-all">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>`;
                });

                pCont.innerHTML = pSnap.empty ? '<p class="text-slate-400 text-center py-4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†</p>' : '';
                pSnap.forEach(d => {
                    const data = d.data();
                    pCont.innerHTML += `
                        <div class="p-5 bg-green-50 border border-green-100 rounded-2xl flex justify-between items-center group">
                            <div class="text-sm">
                                <div class="font-black text-green-800 mb-1">${data.name}</div>
                                <div class="text-green-600/70 font-bold text-xs">Ø¹Ù…Ø±: ${data.age} | Ù…Ø³ØªÙˆÙ‰: ${data.level} | ğŸ“± ${data.phone || 'N/A'}</div>
                            </div>
                            <button onclick="window.deleteDocItem('players', '${d.id}')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-red-50 text-red-500 hover:bg-red-500 hover:text-white transition-all">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>`;
                });
            } catch (e) {
                console.error(e);
                showToast("ÙØ´Ù„ ÙÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©");
            }
        };

        window.deleteDocItem = async (col, id) => {
            if(!confirm("Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ù†Ù‡Ø§Ø¦ÙŠ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) return;
            try {
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', col, id));
                showToast("ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­");
                loadAdminData();
            } catch (e) {
                showToast("ÙØ´Ù„ Ø§Ù„Ø­Ø°ÙØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª");
            }
        };
    </script>
</body>
</html>
